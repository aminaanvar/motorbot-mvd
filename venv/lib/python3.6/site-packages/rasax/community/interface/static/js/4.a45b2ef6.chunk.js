(this["webpackJsonprasa-frontend"]=this["webpackJsonprasa-frontend"]||[]).push([[4],{1896:function(e,t,s){"use strict";s.r(t);var a=s(2),n=s(23),c=s(0),i=s(1),r=s(18),l=s(208),o=s(13),j=s(4),d=s(24),b=s(3),u=s(25);function x(e){var t=e.children;return Object(c.jsx)(u.a,{content:t,ml:1,children:Object(c.jsx)(b.j,{icon:"info-circle",style:{fontSize:18}})})}var h=s(14),O=s(67),m=s.n(O),v=(s(1605),s(1894)),f={PT1H:"h a",P1D:"DD/MM",P1M:"MMM"},g={PT1H:" [at] h a",P1D:" [on] MMMM Do",P1M:" [in] MMMM"},y=function(e){return m.a.duration(e).format("h [hours] m [minutes] s [seconds]",{trim:"both"})},p=h.default.div.withConfig({displayName:"SimpleLineChart__ValueOnlyTooltip",componentId:"seom60-0"})(["padding:6px 8px;background-color:white;border-radius:0.3em;border:1px solid rgb(204,204,204);"]);function k(e){var t=e.data,s=e.title,a=e.isTime,n=e.isAdvanced,i=e.bucket,r=void 0===i?"P1D":i;if(!t)return null;var l,o=0===(l=t).length?0:l.reduce((function(e,t){return e+t.value}),0)/l.length,d=a?y:function(e){return Math.round(e).toLocaleString()};return Object(c.jsxs)(b.e,{children:[Object(c.jsx)(b.i,{variant:"h4",children:s}),Object(c.jsxs)(j.Flex,{children:[Object(c.jsx)(b.y,{children:d(o)}),Object(c.jsxs)(x,{children:["Average ",s.replace(/^[Aa]verage /,"").toLowerCase()," in the specified time range."]})]}),Object(c.jsx)(v.d,{width:"100%",height:150,children:Object(c.jsxs)(v.b,{data:t,children:[n&&[Object(c.jsx)(v.c,{vertical:!1},"grid"),Object(c.jsx)(v.g,{minTickGap:0,allowDecimals:!1,tickLine:!1},"y-axis"),Object(c.jsx)(v.f,{dataKey:"timestamp",allowDecimals:!1,minTickGap:10,tickLine:!1,tickFormatter:function(e){return m.a.unix(e).format(f[r])}},"x-axis")],Object(c.jsx)(v.e,{cursor:!1,isAnimationActive:!1,content:function(e){var t=e.active,s=e.payload;if(!t)return null;var a=s&&s[0].payload;return a?Object(c.jsxs)(p,{children:[d(a.value),m.a.unix(a.timestamp).format(g[r])]}):null}}),Object(c.jsx)(v.a,{type:"linear",dataKey:"value",stroke:"#3d44bc",fill:"#3d44bc",fillOpacity:.3,strokeWidth:2,dot:!1})]})})]})}var M=s(511),w=[{label:"last 24 hours",value:"PT1H",data:M.c.PT1H},{label:"last 30 days",value:"P1D",data:M.c.P1D},{label:"last 12 months",value:"P1M",data:M.c.P1M}];function A(e){var t=e.value,s=e.onChange,a=i.useCallback((function(e){return e&&!Array.isArray(e)&&s(e)}),[s]);return Object(c.jsx)(b.u,{value:w.find((function(e){return e.value===t})),items:w,onChange:a})}var F=s(97);function S(e){var t=e.onFetchAnalytics,s=e.analytics,a=e.bucket,n=e.conversationsStatistics,r=Object(d.l)();return i.useEffect((function(){r("view:analytics:loaded")}),[r]),null===s||null===n?null:Object(c.jsx)(F.a,{title:"Analytics",scrollable:!0,rightContent:Object(c.jsx)(j.Box,{mr:3,children:Object(c.jsx)(A,{value:a,onChange:function(e){return t({bucket:e.value,start:e.data.start,end:e.data.end})}})}),children:Object(c.jsxs)(j.Flex,{flexDirection:"column",children:[Object(c.jsx)(b.i,{variant:"h3",mb:3,children:"Sessions"}),Object(c.jsxs)(j.Flex,{mb:4,flex:"1 0 auto",children:[Object(c.jsx)(j.Box,{mr:3,width:1/3,children:Object(c.jsx)(k,{data:s.conversation_length,bucket:a,title:"Average Session Length",isTime:!0})}),Object(c.jsx)(j.Box,{mx:3,width:1/3,children:Object(c.jsx)(k,{data:s.conversation_steps,bucket:a,title:"Average Number of Messages per Session"})}),Object(c.jsx)(j.Box,{ml:3,width:1/3,children:Object(c.jsx)(k,{data:s.sessions_per_user,bucket:a,title:"Average Number of Sessions per User"})})]}),Object(c.jsx)(b.i,{variant:"h3",mb:3,children:"Users"}),Object(c.jsxs)(j.Flex,{mb:4,flex:"1 0 auto",children:[Object(c.jsx)(j.Box,{mr:3,width:2/3,children:Object(c.jsx)(k,{data:s.conversations,bucket:a,title:"Number of Active Users",isAdvanced:!0})}),Object(c.jsx)(j.Box,{mx:3,width:1/3,children:Object(c.jsx)(k,{data:s.new_users,bucket:a,title:"Number of New Users"})})]}),Object(c.jsx)(b.i,{variant:"h3",mb:3,children:"Messages"}),Object(c.jsxs)(j.Flex,{mb:4,flex:"1 0 auto",children:[Object(c.jsx)(j.Box,{mr:3,width:2/7,children:Object(c.jsx)(k,{data:s.user_messages,bucket:a,title:"Number of User Messages"})}),Object(c.jsx)(j.Box,{mx:3,width:2/7,children:Object(c.jsx)(k,{data:s.bot_messages,bucket:a,title:"Number of Bot Messages"})}),Object(c.jsx)(j.Box,{mx:3,width:2/7,children:Object(c.jsx)(k,{data:s.total_messages,bucket:a,title:"Number of All Messages"})}),Object(c.jsx)(j.Box,{ml:3,width:1/7,children:Object(c.jsx)(b.e,{sx:{height:"100%"},children:Object(c.jsxs)(j.Flex,{flexDirection:"column",style:{height:"100%"},children:[Object(c.jsxs)(j.Box,{flex:"1",children:[Object(c.jsxs)(j.Flex,{children:[Object(c.jsx)(b.i,{variant:"h4",children:"Overall user messages"}),Object(c.jsx)(x,{children:"Overall number of user messages."})]}),Object(c.jsx)(b.y,{children:n.user_messages.toLocaleString()})]}),Object(c.jsxs)(j.Box,{flex:"1",children:[Object(c.jsxs)(j.Flex,{children:[Object(c.jsx)(b.i,{variant:"h4",children:"Overall bot messages"}),Object(c.jsx)(x,{children:"Overall number of bot messages."})]}),Object(c.jsx)(b.y,{children:n.bot_messages.toLocaleString()})]})]})})})]})]})})}var B={onFetchAnalytics:l.a.request,onFetchConversationsStatistics:o.t.request};t.default=Object(r.b)((function(e){return{analytics:e.analytics.metrics,start:e.analytics.start,end:e.analytics.end,bucket:e.analytics.bucket,conversationsStatistics:e.messages.conversationsStatistics,loading:e.analytics.loading}}),B)((function(e){var t=e.start,s=e.end,r=Object(n.a)(e,["start","end"]),l=r.bucket,o=r.onFetchAnalytics,j=r.onFetchConversationsStatistics;return i.useEffect((function(){o({bucket:l,start:t,end:s}),j()}),[l,t,s,o,j]),Object(c.jsx)(S,Object(a.a)({},r))}))}}]);